# butane --pretty --strict coreos.yaml -d . > coreos.ign
variant: fcos
version: 1.6.0
passwd:
  groups:
    - name: nogroup
      gid: 65534
  users:
    - name: googol
      ssh_authorized_keys:
        - ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAILRbXerF24s/H59FsEaPYfHZ1113Eij81+1ED7VGPK+p googol@mbp-laptop
      groups:
        - docker
        - wheel
        - sudo
        - adm
        - systemd-journal
        - www-data
    - name: www-data
      uid: 33
      system: true
      home_dir: /nonexistent
      shell: /usr/sbin/nologin
      groups:
        - tape # gid 33 in coreos
    - name: nobody
      uid: 65534
      system: true
      home_dir: /nonexistent
      shell: /usr/sbin/nologin
      groups:
        - nogroup
storage:
  files:
    - path: /etc/hostname
      mode: 0644
      contents:
        inline: coreos
    - path: /etc/zincati/config.d/55-updates-strategy.toml
      mode: 0644
      contents:
        local: coreos.files/updates-strategy.toml
    - path: /etc/rancher/k3s/k3s.yaml
      mode: 0644
      contents:
        local: coreos.files/smb.conf
    - path: /etc/ssh/sshd_config.d/02-enable-passwords.conf
      mode: 0644
      contents:
        inline: |
          PasswordAuthentication yes
    - path: /etc/samba/smb.conf
      mode: 0644
      overwrite: true
      contents:
        local: coreos.files/smb.conf
    - path: /home/googol/install_k3s.sh
      mode: 0755
      contents:
        local: coreos.files/install_k3s.sh
    - path: /home/googol/install_cockpit.sh
      mode: 0755
      contents:
        local: coreos.files/install_cockpit.sh
  links:
    - path: /etc/localtime
      target: ../usr/share/zoneinfo/Europe/Berlin
